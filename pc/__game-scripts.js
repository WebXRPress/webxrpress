!function(){var n={},e=pc.Application.getApplication();n.domain="https://webxrpress.org",-1!=window.location.href.indexOf("wxrp=world")&&(n.domain=window.location.origin);let r=new URLSearchParams(window.location.search).get("domain");null!=r&&(n.domain=r),n.permalinkSafe=function(n){return(n=n.replace(/[^a-z0-9]+/gi,"-")).replace(/^-*|-*$/g,"").toLowerCase().substring(0,256)},n.randomString=function(n=8,e="aA#"){var r="";e.indexOf("a")>-1&&(r+="abcdefghijklmnopqrstuvwxyz"),e.indexOf("A")>-1&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZ"),e.indexOf("#")>-1&&(r+="0123456789"),e.indexOf("!")>-1&&(r+="~`!@#$%^&*()_+-={}[]:\";'<>?,./|\\");for(var o="",a=n;a>0;--a)o+=r[Math.floor(Math.random()*r.length)];return o},n.loadGlbContainerFromAsset=function(n,r,o,a){var i=function(n){var e=new Blob([n.resource]),i=URL.createObjectURL(e);return this.loadGlbContainerFromUrl(i,r,o,(function(n,e){a(n,e),URL.revokeObjectURL(i)}))}.bind(this);n.ready(i),e.assets.load(n)},n.loadGlbContainerFromUrl=function(n,r,o,a){var i=o+".glb",t={url:n,filename:i},l=new pc.Asset(i,"container",t,null,r);return l.once("load",(function(n){if(a){var e=n.resource.animations;if(1==e.length)e[0].name=o;else if(e.length>1)for(var r=0;r<e.length;++r)e[r].name=o+" "+r.toString();a(null,n)}})),e.assets.add(l),e.assets.load(l),l},window.wxrp=n}();var VR=pc.createScript("VR");VR.attributes.add("spawnPoint",{type:"entity",title:"Spawn Point",default:null}),VR.attributes.add("userHeight",{title:"User Height",type:"number",default:1.55}),VR.attributes.add("iconColor",{title:"Icon Color",type:"rgba",default:[1,.415,0,1]}),VR.attributes.add("hoverColor",{title:"Hover Color",type:"rgba",default:[1,1,1,1]}),VR.attributes.add("pressedColor",{title:"Pressed Color",type:"rgba",default:[.211,.956,.011,1]}),VR.attributes.add("noVRColor",{title:"No VR Color",type:"rgba",default:[.803,0,0,1]}),VR.prototype.initialize=function(){if(this.lastSpawnPosition=new pc.Vec3,this.lastSpawnRotation=new pc.Vec3,null==this.spawnPoint&&(this.spawnPoint=this.app.root.findByName("SpawnPoint")),null==this.spawnPoint)return void alert("Missing initial Spawn Point");this.theScreen=this.entity.findByName("VRButton"),this.app.xr.on("available:"+pc.XRTYPE_VR,this.checkVR,this),this.app.xr.on("start",this.checkVR,this),this.app.xr.on("end",this.checkVR,this),this.checkVR(),this.theScreen.button.on("click",(function(){if(0==this.checkVR())return;let t=this.entity.findByName("CameraParent").findByName("Camera").camera;window.DeviceOrientationEvent&&window.DeviceOrientationEvent.requestPermission?DeviceOrientationEvent.requestPermission().then(function(e){"granted"==e&&window.addEventListener("deviceorientation",function(e){t.startXr(pc.XRTYPE_VR,pc.XRSPACE_LOCAL)}.bind(this))}.bind(this)).catch(console.error):t.startXr(pc.XRTYPE_VR,pc.XRSPACE_LOCAL)}),this),this.cameraParent=this.entity.findByName("CameraParent"),this.synchSpawnPoint();let t=this;setTimeout((function(){t.app.fire("vr:runtime")}),1),this.app.keyboard.on("keydown",(function(t){t.key===pc.KEY_ESCAPE&&this.app.xr.active&&this.app.xr.end()}),this)},VR.prototype.synchSpawnPoint=function(){let t=this.spawnPoint.getPosition();t.y=t.y+this.userHeight,this.cameraParent.setPosition(t),this.cameraParent.setRotation(this.spawnPoint.getRotation()),this.cameraParent.rotateLocal(0,-90,0)},VR.prototype.checkVR=function(){return this.theScreen.enabled=!0,0==this.app.xr.supported||0==this.app.xr.isAvailable(pc.XRTYPE_VR)?(this.theScreen.element.textureAsset=this.app.assets.find("NoVR.png"),this.theScreen.button.hoverTint=this.noVRColor,this.theScreen.button.pressedTint=this.noVRColor,this.theScreen.element.color=this.noVRColor,this.theScreen.element.opacity=this.noVRColor.a,!1):(this.theScreen.element.textureAsset=this.app.assets.find("VR.png"),this.theScreen.button.hoverTint=this.hoverColor,this.theScreen.button.pressedTint=this.pressedColor,this.theScreen.element.color=this.iconColor,this.theScreen.element.opacity=this.iconColor.a,this.app.xr.active?this.theScreen.enabled=!1:this.theScreen.enabled=!0,!0)},VR.prototype.update=function(t){"true"==new URLSearchParams(window.location.search).get("debug")&&(this.lastSpawnPosition.equals(this.spawnPoint.getPosition())&&this.lastSpawnRotation.equals(this.spawnPoint.getRotation())||(this.synchSpawnPoint(),this.lastSpawnPosition=this.spawnPoint.getPosition().clone(),this.lastSpawnRotation=this.spawnPoint.getRotation().clone()))};var SpawnPoint=pc.createScript("SpawnPoint");SpawnPoint.prototype.initialize=function(){let n=this;n.entity.enabled=!1,this.app.on("vr:runtime",(function(){n.entity.enabled=!1})),this.app.on("vr:designtime",(function(){n.entity.enabled=!0}))};var Controllers=pc.createScript("Controllers");Controllers.attributes.add("moveMode",{title:"Movement",type:"number",enum:[{Teleport:1},{"Slide Locomotion":2}],default:2}),Controllers.attributes.add("turnMode",{title:"Turning",type:"number",enum:[{"Snap 30°":30},{"Snap 45°":45},{"Snap 90°":90},{"Smooth Swivel":0}],default:0}),Controllers.attributes.add("moveImmersion",{title:"Move Immersion",type:"number",enum:[{Narrow:2},{Medium:1},{Full:0}],default:0}),Controllers.attributes.add("allowJumping",{title:"Allow Jumping",type:"boolean",default:!0}),Controllers.attributes.add("rayReach",{title:"Ray Reach",type:"number",default:1e3}),Controllers.attributes.add("rightModel",{title:"Right Model (.glb)",type:"asset"}),Controllers.attributes.add("leftModel",{title:"Left Model (.glb)",type:"asset"}),Controllers.prototype.initialize=function(){this.cameraParent=this.app.root.findByName("VR").findByName("CameraParent"),this.lastCameraPT=this.cameraParent.getWorldTransform().clone(),this.camera=this.cameraParent.findByName("Camera"),this.vignette=this.entity.findByName("Vignette"),this.vignette.reparent(this.camera),this.vignette.enabled=!1,this.vignette.reset=0,this.vec2A=new pc.Vec2,this.vec2B=new pc.Vec2,this.vec3A=new pc.Vec3,this.rightButtonDesc=["trigger","grip","pad","stick","a","b"],this.leftButtonDesc=["trigger","grip","pad","stick","x","y"],this.rightButtonStates=Array(5),this.leftButtonStates=Array(5),this.jumpTween=[0,.3,.05,.1,.15,.21,.3,.35,.4,.45,.5,.55,.6,.62,.65,.67,.69,.71,.72,.74,.75,.76,.76,.76,.75,.75,.74,.74,.73,.73,.71,.69,.67,.66,.64,.63,.61,.6,.58,.55,.52,.5,.47,.45,.4,.35,.3,.2,.08,.05],this.jumpReset=!1,this.jumpSuspend=0,this.jumping=0,this.initY=0,this.turnReset=!1,this.color=new pc.Color(1,1,1),this.lastMove33ms=0,this.lastMove5ms=0,this.lastCPPos=null,this.lastCPRot=null,this.left={entity:this.entity.getChildren()[0],renderEntity:null,inputSource:null,asset:null,raycasts:[]},this.right={entity:this.entity.getChildren()[1],renderEntity:null,inputSource:null,asset:null,raycasts:[]},this.app.xr.input.on("add",(function(t){let e=this;new Promise((i=>{let s=null,n=0,r=setInterval((function(){"right"==t.handedness&&null!=e.rightModel&&(clearInterval(r),s=e.rightModel,i(s)),"left"==t.handedness&&null!=e.leftModel&&(clearInterval(r),s=e.leftModel,i(s)),(t.profiles.length>0||n>50)&&(clearInterval(r),t.profiles.forEach((function(i){null==s&&(s=e.app.assets.find(i+"-"+(t.handedness||"none")+".glb"))})),null==s&&(s=e.app.assets.find("generic-trigger-"+(t.handedness||"none")+".glb")),i(s)),n++}),100)})).then((function(i){wxrp.loadGlbContainerFromAsset(i,null,i.name,(function(i,s){var n=s.resource.instantiateRenderEntity();-1!=s.name.indexOf("-left.glb")?(e.left.inputSource=t,e.left.entity.addChild(n),e.left.renderEntity=n,e.left.asset=s):(e.right.inputSource=t,e.right.entity.addChild(n),e.right.renderEntity=n,e.right.asset=s)}))})),t.once("remove",(function(){this.left.asset&&(this.left.inputSource=null,this.left.asset.unload(),this.app.assets.remove(this.left.asset),this.left.asset=null,this.left.renderEntity.destroy(),this.left.renderEntity=null),this.right.asset&&(this.right.inputSource=null,this.right.asset.unload(),this.app.assets.remove(this.right.asset),this.right.asset=null,this.right.renderEntity.destroy(),this.right.renderEntity=null)}),this)}),this)},Controllers.prototype.update=function(t){this.right.inputSource&&this.left.inputSource&&null==this.left.inputSource.hand&&(Date.now()-this.lastMove5ms>5&&(this.jumpUser(t),this.moveUser(t),this.turnUser(t),this.lastMove5ms=Date.now()),Date.now()-this.lastMove33ms>33&&(this.right.raycasts=this.updateRaycasts(this.right.inputSource),this.right.raycasts.length>0&&this.app.fire("controllers:right_raycasts",this.right.raycasts),this.left.raycasts=this.updateRaycasts(this.left.inputSource),this.left.raycasts.length>0&&this.app.fire("controllers:left_raycasts",this.left.raycasts),this.lastMove33ms=Date.now()),this.trackHands())},Controllers.prototype.jumpUser=function(t){0!=this.allowJumping&&(this.right.inputSource.gamepad.buttons[3].pressed?0==this.jumping&&0==this.jumpReset&&(this.vec3A.copy(this.cameraParent.getLocalPosition()),this.initY=this.vec3A.y,this.jumping=this.jumpTween.length,this.jumpReset=!0,this.jumpSuspend=10):(this.jumpReset=!1,this.jumpSuspend=0),0!=this.jumping&&(this.right.inputSource.gamepad.buttons[3].pressed&&27==this.jumping&&0!=this.jumpSuspend?this.jumpSuspend=this.jumpSuspend-1:this.jumping=this.jumping-1,this.vec3A.copy(this.cameraParent.getPosition()),this.vec3A.y=this.initY+this.jumpTween[this.jumping],this.cameraParent.setLocalPosition(this.vec3A)))},Controllers.prototype.moveUser=function(t){let e=this.left.inputSource.gamepad.axes[2],i=this.left.inputSource.gamepad.axes[3];if(i||e){if(this.vec2A.set(e,i),this.vec2A.length()){this.vec2A.normalize(),this.vec2B.x=this.camera.forward.x,this.vec2B.y=this.camera.forward.z,this.vec2B.normalize();var s=Math.atan2(this.vec2B.x,this.vec2B.y)-Math.PI/2,n=this.vec2A.x*Math.sin(s)-this.vec2A.y*Math.cos(s);this.vec2A.y=this.vec2A.y*Math.sin(s)+this.vec2A.x*Math.cos(s),this.vec2A.x=n;let r=2.5*Math.max(Math.abs(e),Math.abs(i));this.vec2A.scale(r),this.cameraParent.translate(this.vec2A.x*t,0,this.vec2A.y*t)}this.doMoveImmersion(t)}},Controllers.prototype.turnUser=function(t){let e=this.right.inputSource.gamepad.axes[2],i=this.right.inputSource.gamepad.axes[3],s=Math.abs(e),n=Math.abs(i);if(s<.1&&(this.turnReset=!1),!(s<n))if(0==this.turnMode){let i=-e;this.vec3A.copy(this.camera.getLocalPosition()),this.cameraParent.translateLocal(this.vec3A);let n=2*s;this.cameraParent.rotateLocal(0,Math.sign(i)*n,0),this.cameraParent.translateLocal(this.vec3A.scale(-1)),this.doMoveImmersion(t)}else s>.75&&0==this.turnReset&&(this.turnReset=!0,e>0?this.cameraParent.rotateLocal(0,-this.turnMode,0):this.cameraParent.rotateLocal(0,this.turnMode,0))},Controllers.prototype.doMoveImmersion=function(t){if(0==this.moveImmersion)return;if(this.lastCameraPT.equals(this.cameraParent.getWorldTransform()))return;this.vignette.enabled=!0;let e=-.33;2==this.moveImmersion&&(e=-.48),this.vec3A.copy(this.vignette.getLocalPosition()),this.vec3A.z=e,this.vignette.setLocalPosition(this.vec3A),clearTimeout(this.vignette.reset);var i=this;this.vignette.reset=setTimeout((function(){let t=setInterval((function(){i.vignette.getLocalPosition().z<0?(i.vec3A.copy(i.vignette.getLocalPosition()),i.vec3A.z=i.vec3A.z+.02,i.vignette.setLocalPosition(i.vec3A)):(clearInterval(t),i.vignette.enabled=!1)}),10)}),500),this.lastCameraPT=this.cameraParent.getWorldTransform().clone()},Controllers.prototype.trackHands=function(){this.left.entity.setPosition(this.left.inputSource.getPosition()),this.left.entity.setRotation(this.left.inputSource.getRotation()),this.drawLine(this.left.inputSource),null!=this.left.inputSource.gamepad&&this.throwButtonEvents(this.left.inputSource),this.right.entity.setPosition(this.right.inputSource.getPosition()),this.right.entity.setRotation(this.right.inputSource.getRotation()),this.drawLine(this.right.inputSource),null!=this.right.inputSource.gamepad&&this.throwButtonEvents(this.right.inputSource)},Controllers.prototype.updateRaycasts=function(t){let e=t.getOrigin(),i=t.getDirection();i.mulScalar(this.rayReach).add(e);let s=this.app.systems.rigidbody.raycastAll(e,i);return s.sort((function(t,i){return t.point.distance(e)-i.point.distance(e)})),s},Controllers.prototype.throwButtonEvents=function(t){let e=t.gamepad,i="right";"left"==t.handedness&&(i="left");let s=[],n=[];"right"==i?(s=this.rightButtonStates,n=this.rightButtonDesc):(s=this.leftButtonStates,n=this.leftButtonDesc);for(let t=0;t<6;t++){let r=e.buttons[t].pressed;if(s[t]!=r){let e="controllers:";r?(e+=i+"_"+n[t],this.app.fire(e+"_down")):e+=i+"_"+n[t]+"_up",this.app.fire(e),s[t]=r}}"right"==i?this.rightButtonStates=s:this.leftButtonStates=s},Controllers.prototype.drawLine=function(t){if("true"!=new URLSearchParams(window.location.search).get("debug"))return;let e=t.getOrigin(),i=t.getDirection();i.mulScalar(this.rayReach).add(e),t.selecting?this.color.set(0,1,0):this.color.set(1,1,1),this.app.drawLine(e,i,this.color)};var Billboard=pc.createScript("Billboard");Billboard.attributes.add("htmlasset",{title:"HTML Asset",type:"asset"}),Billboard.attributes.add("interactive",{title:"Interactive",type:"boolean",default:!1}),Billboard.attributes.add("re",{title:"Render Engine",type:"string",default:"htmlToImage",enum:[{html2canvas:"html2canvas"},{htmlToImage:"htmlToImage"}]}),Billboard.attributes.add("width",{title:"Render Width (px)",type:"number",default:320}),Billboard.attributes.add("height",{title:"Render Height (px)",type:"number",default:240}),Billboard.attributes.add("bgColor",{title:"Background Color",type:"rgb",default:[1,1,1]}),Billboard.attributes.add("blendMode",{title:"Blend Mode",type:"number",default:pc.BLEND_NONE,enum:[{Subtractive:pc.BLEND_SUBTRACTIVE},{Additive:pc.BLEND_ADDITIVE},{Normal:pc.BLEND_NORMAL},{None:pc.BLEND_NONE},{"Pre-multiplied":pc.BLEND_PREMULTIPLIED},{Multiplicative:pc.BLEND_MULTIPLICATIVE},{"Additive Alpha":pc.BLEND_ADDITIVEALPHA},{"Multiplicative 2x":pc.BLEND_MULTIPLICATIVE2X},{Screen:pc.BLEND_SCREEN}]}),Billboard.attributes.add("alwaysFC",{title:"Always Face Camera",type:"boolean",default:!0}),Billboard.prototype.initialize=function(){this.guid=wxrp.randomString(),this.cameraParent=this.app.root.findByName("VR").findByName("CameraParent"),this.prepareRendering(),this.createIFrame(),this.processInteractive()},Billboard.prototype.processInteractive=function(){if(this.mouse={x:0,y:0},!this.interactive)return;let t=this.entity.getLocalScale().clone();this.entity.addComponent("collision",{type:"box",halfExtents:new pc.Vec3(t.x/2,.01,t.z/2)});let e=new pc.Entity;e.reparent(this.entity),e.setRotation(this.entity.getRotation());let i=new pc.Entity;i.reparent(this.entity),i.setRotation(this.entity.getRotation());let r=this.entity.getLocalScale().clone();r.mulScalar(.5),i.translate(-r.x,r.z,0);let right_raycasts=function(t){if(t[0].entity!=this.entity)return;e.setPosition(t[0].point);let r=e.getLocalPosition().clone();r.sub(i.getLocalPosition().clone());let s=Math.round(r.x*this.width);s<0&&(s=0);let a=Math.round(r.z*this.height);a<0&&(a=0),this.mouse={x:s,y:a},this.sendMessage({mouseXY:this.mouse})};this.app.on("controllers:right_raycasts",right_raycasts,this);this.app.on("controllers:right_trigger_down",(function(){let t=this.app.root.findByName("Controllers").script.Controllers.right.raycasts;t.length>0&&t[0].entity==this.entity&&this.sendMessage({mouseDown:!0})}),this);this.app.on("controllers:right_trigger_up",(function(){let t=this.app.root.findByName("Controllers").script.Controllers.right.raycasts;t.length>0&&t[0].entity==this.entity&&this.sendMessage({mouseUp:!0})}),this),this.on("destroy",(function(){this.app.off("controllers:right_raycasts",right_raycasts),this.app.off("controllers:right_trigger",right_trigger),i.destroy(),e.destroy()}))},Billboard.prototype.createIFrame=function(){this.iframe=document.createElement("iframe"),this.iframe.id="bb_"+wxrp.permalinkSafe(this.entity.name)+"_"+this.guid,this.iframe.width=this.width+"px",this.iframe.height=this.height+"px",this.iframe.style.backgroundColor=new pc.Color(this.bgColor.r,this.bgColor.g,this.bgColor.b).toString();let t=wxrp.domain+"?wxrp=blank&guid="+this.guid+"&re="+this.re;this.iframe.src=t,document.body.appendChild(this.iframe);let e=this;window.addEventListener("message",(function(t){null!=t.data.guid&&t.data.guid==e.guid&&(null!=t.data.parentConsoleLog&&console.log(t.data.parentConsoleLog),e.fire("message",t.data))})),this.on("message",(function(t){null!=t.ready&&(null!=this.htmlasset?this.renderHTML(this.htmlasset.resource):this.renderHTML("")),null!=t.dataUrl&&(this.img.src=t.dataUrl,this.texture.setSource(this.img),this.texture.upload())})),this.on("attr",(function(t,e,i){-1!="htmlasset,width,height,bgColor".indexOf(t)&&(this.iframe.width=this.width+"px",this.iframe.height=this.height+"px",this.iframe.style.backgroundColor=new pc.Color(this.bgColor.r,this.bgColor.g,this.bgColor.b).toString(),null!=this.htmlasset?this.renderHTML(this.htmlasset.resource):this.renderHTML(""))}))},Billboard.prototype.prepareRendering=function(){this.material=this.entity.render.meshInstances[0].material.clone(),this.material.emissiveMap=new pc.Color(this.bgColor.r,this.bgColor.g,this.bgColor.b,1),this.texture=new pc.Texture(this.app.graphicsDevice,{format:pc.PIXELFORMAT_R8_G8_B8,autoMipmap:!0}),this.texture.minFilter=pc.FILTER_LINEAR_MIPMAP_LINEAR,this.texture.magFilter=pc.FILTER_LINEAR,this.texture.addressU=pc.ADDRESS_CLAMP_TO_EDGE,this.texture.addressV=pc.ADDRESS_CLAMP_TO_EDGE,this.material.emissiveMap=this.texture,this.material.opacityMap=this.texture,this.material.blendType=this.blendMode,this.entity.render.meshInstances[0].material=this.material,this.material.update(),this.img=new Image(this.width,this.height)},Billboard.prototype.renderHTML=function(t){this.sendMessage({html:t,width:this.width,height:this.height,backgroundColor:this.iframe.style.backgroundColor,requestRender:!0})},Billboard.prototype.sendMessage=function(t){t.guid=this.guid,this.iframe.contentWindow.postMessage(t,"*")},Billboard.prototype.update=function(t){this.entity.lookAt(this.cameraParent.getPosition(),pc.Vec3.DOWN),this.entity.rotateLocal(270,0,0)};var WatchGamepad=pc.createScript("Console - Watch Gamepads");WatchGamepad.attributes.add("rightButtons",{title:"Right Buttons",type:"boolean",default:!0}),WatchGamepad.attributes.add("rightAxes",{title:"Right Axes",type:"boolean",default:!0}),WatchGamepad.attributes.add("leftButtons",{title:"Left Buttons",type:"boolean",default:!0}),WatchGamepad.attributes.add("leftAxes",{title:"Left Axes",type:"boolean",default:!0}),WatchGamepad.prototype.initialize=function(){let t=this;setInterval((function(){try{let e=pc.app.root.findByName("Controllers").script.Controllers,a=e.right.inputSource,s=e.left.inputSource,o={right:{buttons:a.gamepad.buttons,axes:a.gamepad.axes},left:{buttons:s.gamepad.buttons,axes:s.gamepad.axes}};t.rightButtons||delete o.right.buttons,t.leftButtons||delete o.left.buttons,t.rightAxes||delete o.right.axes,t.leftAxes||delete o.left.axes,(t.rightButtons||t.rightAxes||t.leftButtons||t.leftAxes)&&console.log(o)}catch(t){}}),1e3)};var Console=pc.createScript("Console");Console.attributes.add("fontSize",{title:"Font Size (px)",type:"number",step:1,min:8,max:36,default:12}),Console.prototype.initialize=function(){this.content=[],this.oldConsole=console.log;let t=this;console.log=function(e){t.log(e)},this.on("attr:fontSize",(function(){this.render()})),this.myBillboard=this.entity.getChildren()[0].script.Billboard;var on_message=function(t){null!=t.domChanged&&this.myBillboard.sendMessage({requestRender:!0})};this.myBillboard.on("message",on_message,this),this.myBillboard.on("destroy",(function(){this.myBillboard.app.off("message",on_message)}))},Console.prototype.log=function(t){"object"==typeof t?(this.content.push(this.timestamp()+" (object)"),this.content=this.content.concat(this.var_dump(t).split("\n"))):this.content.push(this.timestamp()+" "+this.var_dump(t));let e=this.fontSize+Math.round(this.fontSize/8),o=Math.round(this.myBillboard.height/e);this.content.length>o&&this.content.splice(0,this.content.length-o),this.render()},Console.prototype.render=function(){let t=this.content.join("<br>");this.myBillboard.sendMessage({console:t,fontSize:this.fontSize})},Console.prototype.var_dump=function(t,e=5){for(var o="",n="",i=0;i<e+1;i++)n+="  ";if("object"!=typeof t)return o="("+typeof t+") "+t;for(var s in t){var r=t[s];if("object"==typeof r){if(!((o+=n+"'"+s+"'(object) =>\n").length<65536))return o+="...exceeded 65,536 bytes\n";try{o+=this.var_dump(r,e+1)}catch(t){o+="..."+t.message+"\n"}if(e>8)return o}else"function"!=typeof r&&(o+=n+"'"+s+"' => ("+typeof r+') "'+r+'"\n')}return 0===e?"(object)"+String.fromCharCode(10)+o:o},Console.prototype.timestamp=function(){var t=new Date;return"["+("0"+t.getHours()).slice(-2)+":"+("0"+t.getMinutes()).slice(-2)+":"+("0"+t.getSeconds()).slice(-2)+"]"};!function(){var t=new pc.Vec3;pc.RigidBodyComponentSystem.prototype.raycastFirstByTag=function(n,r,a){for(var e=Number.MAX_VALUE,i=null,s=this.app.systems.rigidbody.raycastAll(n,r),o=0;o<s.length;++o){var y=s[o];if(y.entity.tags.has(a)){t.sub2(y.point,n);var p=t.lengthSq();p<e&&(e=p,i=y)}}return i}}();var OndoActions=pc.createScript("ondoActions");OndoActions.prototype.initialize=function(){},OndoActions.prototype.update=function(o){};